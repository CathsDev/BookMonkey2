<form [formGroup]="form" (ngSubmit)="submitForm()">

    <label for="title">Titel</label>
    <input formControlName="title"
           id="title">
    <bm-form-errors
        controlName="title"
        [messages]="{ required: 'Title is required' }">
    </bm-form-errors>

    <label for="subtitle">Untertitel</label>
    <input formControlName="subtitle"
           id="subtitle">

    <label for="isbn">ISBN</label>
    <input formControlName="isbn"
           id="isbn">
    <bm-form-errors
            controlName="isbn"
            [messages]="{
                required: 'ISBN is required',
                isbnformat: 'ISBN must have 10 or 13 chars',
                isbnexists: 'ISBN already exists'
             }">
    </bm-form-errors>

    <label>Authors</label>
    <button type="button" class="add"
            (click)="addAuthorControl()">
        + Author
    </button>
    <fieldset formArrayName="authors">
        <input
                *ngFor="let a of authors.controls; index as i"
                [attr.aria-label]="'Author ' + i"
                [formControlName]="i">
    </fieldset>
    <bm-form-errors
            controlName="authors"
            [messages]="{ atleastonevalue: 'At least one author required' }">
    </bm-form-errors>

    <label for="description">Beschreibung</label>
    <textarea formControlName="description"
              id="description"></textarea>

    <label for="published">Ver√∂ffentlicht</label>
    <input formControlName="published"
           id="published"
           type="date"
           useValueAsLocalIs>

    <label for="thumbnailUrl">Thumbnail Url</label>
    <input formControlName="thumbnailUrl"
           type="url"
           id="thumbnailUrl">

    <button type="submit" [disabled]="form.invalid">Speichern</button>

</form>
<pre>{{ form.value | json }}</pre>
